$ bash

  553  cp ~/PAGeDeliverables/delivery_28_08_2012/gottberg/data.tar.gz gott.tar.gz
  554  cp ~/PAGeDeliverables/delivery_28_08_2012/collard/data.tar.gz coll.tar.gz
  555  cp ~/PAGeDeliverables/delivery_28_08_2012/antonio/data.tar.gz anto.tar.gz
  562  cp ~/PAGeDeliverables/delivery_28_08_2012/everett/data.tar.gz ever.tar.gz


  564  tar xzvf coll.tar.gz
  567  tar xzvf ever.tar.gz
  568  tar xzvf gott.tar.gz
  568  tar xzvf ant.tar.gz

  571  cd data/

  574  rename 's/automated_annotation\.embl/\.embl/' *embl

  576  rename 's/\.\./\./' *embl


$ PATH=$PATH:/lustre/scratch108/pathogen/fy2/page/analysis_coregenome/pneumoscript


pwd: /lustre/scratch108/pathogen/fy2/page/analysis_coregenome/data/annotated_genomes/data

$ cat /lustre/scratch108/pathogen/fy2/page/analysis_coregenome/data/clade_subsamples.txt \
> | xargs -n 1 -P 2 -t -I{} perl -e '`convert_to_fasta.pl {}.embl > {}.fasta`'

pwd: /lustre/scratch108/pathogen/fy2/page/analysis_coregenome/data
$ mv annotated_genomes/data/*fasta annotation_in_fasta/

$ cat *.fasta > AllTogether.fasta

$ formatdb -i AllTogether.fasta -p F -o T -V T


$ ls *#*fasta | xargs -n 1 -p -P 1 -t -I {} \ 
> perl -e '`bsub -q normal -o {}.bout -e {}.berr blastall -p blastn -d AllTogether.fasta -i {} -m 8 -e 0.0001 -o {}.blastM8`'


$ cat *blastM8 > All.versus.All.m8
$ mkdir to_delete
$ mv *fasta to_delete/
$ mv *.??? to_delete/
$ mv *M8 to_delete/


$ cat /lustre/scratch108/pathogen/fy2/page/analysis_coregenome/data/clade_subsamples.txt \
> | xargs -n 1 -P 2 -t -I{} perl -e '`embl2orthomcl_gg.pl {}.embl > {}.gg`'

pwd:/lustre/scratch108/pathogen/fy2/page/analysis_coregenome/data/annotation_in_fasta
$ mv ../annotated_genomes/data/*gg .

$ cat *gg > All.gg
$ mv *#*.gg to_delete/


bsub -R "select[type==X86_64 && mem > 3000] rusage[mem=3000]" -M3000000 -o out -e out.err 'orthomcl.pl --mode 3 --blast_file All.versus.All.m8 --gg_file All.gg -m8blast'

